language: node_js

# mvn settings
before_install: "git clone -b travis `git config --get remote.origin.url` target/travis"
script: "[ ${TRAVIS_PULL_REQUEST} = 'false' ] && mvn clean deploy --settings target/travis/settings.xml || mvn clean verify --settings target/travis/settings.xml"

node_js:
  - "4"
env:
  - CXX=g++-4.8
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-4.8
install:
  - npm install
  - npm install -g grunt-cli
  - grunt
after_script:
  mvn deploy

env:
  global:
    - secure: "OLZdQ/wXVInZyKScT2+JnzSkRpqTE1LqRs/oxJ8WbXuQbI3fK1h5no8SbnczpYtiN+JQcXbl1qQHaXPSg5Eg97a97MUz6/gQLJbAT8bYziiVtrKbd3u37B+drC2awm4EJClFJD0hYgUX7ZamMN78jkRNs4vcNpCYMHtMOdPav+k="
    - secure: "Syb9ilIeTQNV/xrRhzZuhjBcoI2kfv/8THtDl0wRf+Bvil5nu75gA/kN0Ne+wW4eW53iAoyzOIqTaQMeQcRg25kCXfH9SAHKPk/pojUh0N//M5rjWjes9Nq0magwtoU22LE88I/24/8l+0v+R3WJZ2GPSqtqkKtQP0T0t4DIXi0="